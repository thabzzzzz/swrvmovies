import{_ as b,g as h,h as w,j as k,o as u,c as p,d as t,t as a,F as C,n as A,z as B,m as N,k as V,l as $,p as R,f as S}from"./index-Ot4iCwHM.js";import{u as q}from"./cartStore-zu3TFLu_.js";const i=r=>(R("data-v-0f1feee2"),r=r(),S(),r),D=i(()=>t("h2",{class:"line-divider font-2xl"},[t("span",{class:""},"Backlog")],-1)),M={class:"cartmain mx-20"},j=i(()=>t("hr",null,null,-1)),F={class:"cart-table"},E=i(()=>t("thead",null,[t("tr",null,[t("th",null,"Product Details"),t("th",{class:"text-center"},"Viewings"),t("th",{class:"text-center"},"Runtime (minutes)"),t("th",{class:"text-center"},"Total")])],-1)),L={key:0,class:"product-details"},Q={class:"flex items-center"},T={class:"w-20"},U=["src","alt"],z={class:"flex flex-col justify-between ml-4 flex-grow"},G={class:"font-bold text-sm"},P={class:"text-red-500 text-xs"},W=["onClick"],H={class:"text-center"},J=["onUpdate:modelValue","onChange"],K={class:"text-center"},O={class:"text-center"},X=i(()=>t("br",null,null,-1)),Y=i(()=>t("br",null,null,-1)),Z={class:"total-runtime-row"},I=i(()=>t("td",{colspan:"3",class:"text-right font-bold"},"Backlog Watchtime:",-1)),tt={class:"text-center font-bold"},et={__name:"CartView",setup(r){const _=q(),n=h(_.cart),d=h({});w(async()=>{await f()});async function f(){if(Array.isArray(n.value))for(const s of n.value)await m(s.product.id)}async function m(s){try{const e=await(await fetch(`https://api.themoviedb.org/3/movie/${s}?api_key=672d8a2f825f32332973ed7e2de2efa1`)).json();console.log(e);const c=n.value.findIndex(l=>l.product.id===s);if(c!==-1){const l=n.value[c].product;l.runtime=e.runtime||"N/A",l.genres=e.genres||[],l.image=`https://image.tmdb.org/t/p/w500/${e.poster_path}`||""}d.value[s]=e.runtime||"N/A"}catch(o){console.error(`Error fetching movie details for movie ID ${s}:`,o)}}const v=s=>s&&s.length>0?s.map(o=>o.name).join(", "):"N/A",x=s=>{const o=n.value.findIndex(e=>e.product.id===s);o!==-1&&n.value.splice(o,1)},g=k(()=>{let s=0;for(const o of n.value){const e=d.value[o.product.id]||0;s+=e*o.quantity}return s}),y=s=>{_.updateCartItemQuantity(s.product.id,s.quantity)};return(s,o)=>(u(),p("div",null,[D,t("div",M,[t("button",{class:"secondaryButton mb-5",onClick:o[0]||(o[0]=e=>s.$router.back())}," Back "),t("h3",null,a(s.cartItemCount)+" "+a(s.itemLabel),1),j,t("table",F,[E,t("tbody",null,[(u(!0),p(C,null,A(n.value,e=>(u(),p("tr",{key:e.product.id},[e?(u(),p("td",L,[t("div",Q,[t("div",T,[t("img",{class:"h-24",src:e.product.image,alt:e.product.title},null,8,U)]),t("div",z,[t("span",G,a(e.product.title),1),t("span",P,a(e.product.brand),1),t("i",null,a(v(e.product.genres)||"N/A"),1),t("a",{href:"#",class:"font-semibold hover:text-red-500 text-gray-500 text-xs",onClick:B(c=>x(e.product.id),["prevent"])},"Remove",8,W)])])])):N("",!0),t("td",H,[V(t("input",{type:"number","onUpdate:modelValue":c=>e.quantity=c,onChange:c=>y(e),class:"input"},null,40,J),[[$,e.quantity]])]),t("td",K,a(d.value[e.product.id]||"N/A"),1),t("td",O,a((d.value[e.product.id]||0)*e.quantity),1)]))),128)),X,Y,t("tr",Z,[I,t("td",tt,a(g.value),1)])])])])]))}},nt=b(et,[["__scopeId","data-v-0f1feee2"]]);export{nt as default};
